package iteration_names

import (
	"fmt"
	"math/rand"
	"net/http"
	"strings"
	"time"
	"unicode"
)

var adjectives = map[string][]string{
	"A": {
		"Abiding",
		"Adequate",
		"Aesthetic",
		"Affordable",
		"Ageless",
		"Austere",
		"Authentic",
		"Attentive",
		"Articulate",
		"Angelic",
		"Adolescent",
	},
	"B": {
		"Bashful",
		"Bankrupt",
		"Beaming",
		"Belligerent",
		"Burly",
		"Busy",
		"Brash",
		"Brilliant",
	},
	"C": {
		"Calm",
		"Captivating",
		"Casual",
		"Charming",
		"Clean",
		"Cogent",
		"Crazy",
		"Cute",
	},
	"D": {
		"Dainty",
		"Damaged",
		"Dangerous",
		"Dapper",
		"Dazzling",
		"Dutiful",
		"Dramatic",
	},
	"E": {
		"Easy-going",
		"Eccentric",
		"Effervescent",
		"Enraged",
		"Equable",
		"Evanescent",
		"Exemplary",
		"Efficacious",
	},
	"F": {
		"Fabulous",
		"Fancy",
		"Fantastic",
		"Fidgety",
		"Florid",
		"Forgiving",
		"Fussy",
		"Frugal",
	},
	"G": {
		"Gainful",
		"Gallant",
		"Ghostly",
		"Glad",
		"Gabby",
		"Goofy",
		"Groovy",
		"Growing",
		"Gutsy",
	},
	"H": {
		"Hairless",
		"Handsome",
		"Headstrong",
		"Hesitant",
		"Hilarious",
		"Hungry",
		"Humane",
		"Humourless",
	},
	"I": {
		"Idle",
		"Illogical",
		"Improbable",
		"Impulsive",
		"Inclined",
		"Indecisive",
		"Introverted",
		"Intended",
		"Impervious",
	},
	"J": {
		"Jarring",
		"Jeering",
		"Jinxed",
		"Joyous",
		"Jolly",
		"Judicious",
		"Jovial",
		"Jesting",
	},
	"K": {
		"Knockout",
		"Kindly",
		"Keen",
		"Kind",
		"Knowledgeable",
		"Kooky",
		"Kingly",
	},
	"L": {
		"Lanky",
		"Lesser",
		"Loud",
		"Lucky",
		"Ladylike",
		"Livid",
		"Laughing",
		"Loyal",
		"Lonely",
	},
	"M": {
		"Maniacal",
		"Mean",
		"Magical",
		"Mysterious",
		"Musing",
		"Mesmerised",
		"Meticulous",
		"Moody",
		"Marvellous",
		"Maternal",
		"Mediocre",
	},
	"N": {
		"Native",
		"Needy",
		"Nice",
		"Noble",
		"Naive",
		"Naughty",
		"Nefarious",
		"Nonchalant",
		"Nutty",
		"Nervous",
	},
	"O": {
		"Obedient",
		"Obscure",
		"Odd",
		"Odorous",
		"Ominous",
		"Opulent",
		"Obedient",
		"Obnoxious",
		"Offensive",
	},
	"P": {
		"Palatable",
		"Peaceful",
		"Pleasing",
		"Poetic",
		"Popular",
		"Personable",
		"Pesky",
		"Philosophical",
		"Pessimistic",
		"Photogenic",
	},
	"Q": {
		"Quality",
		"Quelled",
		"Quirky",
		"Quaint",
		"Quarrelsome",
		"Quiet",
		"Queer",
		"Quizzical",
	},
	"R": {
		"Radiant",
		"Rich",
		"Rude",
		"Ruthless",
		"Riled",
		"Respectable",
		"Resourceful",
		"Righteous",
		"Romantic",
		"Revered",
		"Rational",
	},
	"S": {
		"Sickly",
		"Skewered",
		"Smarmy",
		"Sadistic",
		"Savage",
		"Seductive",
		"Sleepy",
		"Sanguine",
		"Scornful",
	},
	"T": {
		"Tactical",
		"Tense",
		"Thoughtful",
		"Tiresome",
		"Tranquil",
		"Tactless",
		"Thrifty",
		"Thickset",
		"Tolerant",
	},
	"U": {
		"Ubiquitous",
		"Umbrageous",
		"Unassuming",
		"Upbeat",
		"Useless",
		"Underage",
		"Uncooperative",
	},
	"V": {
		"Virtual",
		"Vexing",
		"Vicarious",
		"Vengeful",
		"Vindictive",
		"Vain",
		"Versatile",
		"Vile",
		"Vicious",
		"Vulnerable",
	},
	"W": {
		"Wacky",
		"Wild",
		"Worldly",
		"Weary",
		"Worrisome",
		"Whiny",
		"Warmhearted",
	},
	"X": {
		"Xeric",
		"Xenogeneic",
		"Xenial",
		"Xerothermic",
		"Xylotomous",
	},
	"Y": {
		"Yawning",
		"Yielding",
		"Yucky",
		"Youthful",
		"Yellow",
	},
	"Z": {
		"Zany",
		"Zealous",
		"Zestful",
		"Zippy",
	},
}

var animals = map[string][]string{
	"A": {
		"Aardvark",
		"Akita",
		"Albatross",
		"Alligator",
		"Angelfish",
		"Ant",
		"Anteater",
		"Antelope",
		"Armadillo",
		"Axolotl",
	},
	"B": {
		"Baboon",
		"Badger",
		"Bandicoot",
		"Bat",
		"Beagle",
		"Bear",
		"Beaver",
		"Bee",
		"Beetle",
		"Bird",
		"Bison",
		"Bloodhound",
		"Bobcat",
		"Buffalo",
		"Bulldog",
		"Bullfrog",
		"Burmese",
		"Butterfly",
	},
	"C": {
		"Camel",
		"Capybara",
		"Cassowary",
		"Cat",
		"Caterpillar",
		"Catfish",
		"Centipede",
		"Chameleon",
		"Cheetah",
		"Chickaree",
		"Chicken",
		"Chihuahua",
		"Chimpanzee",
		"Chinchilla",
		"Chipmunk",
		"Cockroach",
		"Collie",
		"Coral",
		"Cougar",
		"Cow",
		"Coyote",
		"Crab",
		"Crane",
		"Crocodile",
		"Cuttlefish",
	},
	"D": {
		"Dachshund",
		"Dalmatian",
		"Deer",
		"Dingo",
		"Dodo",
		"Dog",
		"Dolphin",
		"Donkey",
		"Dormouse",
		"Dragonfly",
		"Duck",
		"Dugong",
	},
	"E": {
		"Eagle",
		"Earthworm",
		"Earwig",
		"Echidna",
		"Elephant",
		"Elk",
		"Emu",
	},
	"F": {
		"Falcon",
		"Ferret",
		"Fish",
		"Flamingo",
		"Flatworm",
		"Flounder",
		"Fly",
		"Fox",
		"Frog",
	},
	"G": {
		"Gecko",
		"Gerbil",
		"Gibbon",
		"Giraffe",
		"Goat",
		"Goose",
		"Gopher",
		"Gorilla",
		"Grasshopper",
		"Greyhound",
		"Grouse",
		"Guppy",
	},
	"H": {
		"Hamster",
		"Hare",
		"Hedgehog",
		"Heron",
		"Himalayan",
		"Hippopotamus",
		"Hornet",
		"Horse",
		"Hummingbird",
		"Hunstman",
		"Hyena",
	},
	"I": {
		"Ibex",
		"Ibis",
		"Iguana",
		"Impala",
		"Inchworm",
		"Insect",
		"Isopod",
	},
	"J": {
		"Jackal",
		"Jackrabbit",
		"Jaguar",
		"Javanese",
		"Jay",
		"Jellyfish",
	},
	"K": {
		"Kakapo",
		"Kangaroo",
		"Kestrel",
		"Kingfisher",
		"Kiwi",
		"Koala",
	},
	"L": {
		"Labradoodle",
		"Ladybird",
		"Lemming",
		"Lemur",
		"Leopard",
		"Liger",
		"Lion",
		"Lionfish",
		"Lizard",
		"Llama",
		"Lobster",
		"Lynx",
	},
	"M": {
		"Macaw",
		"Magpie",
		"Maltese",
		"Manatee",
		"Mandrill",
		"Mastiff",
		"Mayfly",
		"Meerkat",
		"Millipede",
		"Mole",
		"Mongoose",
		"Monkey",
		"Moorhen",
		"Moose",
		"Moth",
		"Mouse",
		"Mule",
	},
	"N": {
		"Narwhal",
		"Newfoundland",
		"Newt",
		"Nightingale",
		"Numbat",
	},
	"O": {
		"Ocelot",
		"Octopus",
		"Opossum",
		"Orangutan",
		"Osprey",
		"Ostrich",
		"Otter",
		"Oyster",
	},
	"P": {
		"Panda",
		"Panther",
		"Parrot",
		"Peacock",
		"Pelican",
		"Penguin",
		"Pheasant",
		"Pig",
		"Piranha",
		"Platypus",
		"Pointer",
		"Poodle",
		"Porcupine",
		"Possum",
		"Prawn",
		"Puffin",
		"Pug",
		"Puma",
	},
	"Q": {
		"Quail",
		"Quetzal",
		"Quokka",
		"Quoll",
	},
	"R": {
		"Rabbit",
		"Raccoon",
		"Rat",
		"Rattlesnake",
		"Reindeer",
		"Rhinoceros",
		"Robin",
		"Rottweiler",
	},
	"S": {
		"Salamander",
		"Scorpion",
		"Seahorse",
		"Seal",
		"Sheep",
		"Shrew",
		"Shrimp",
		"Skunk",
		"Sloth",
		"Snail",
		"Snake",
		"Sparrow",
		"Squid",
		"Squirrel",
		"Starfish",
		"Stingray",
		"Stoat",
		"Swan",
	},
	"T": {
		"Tapir",
		"Tarantula",
		"Termite",
		"Tiger",
		"Tortoise",
		"Toucan",
		"Turkey",
		"Turtle",
	},
	"U": {
		"Uakari",
		"Unau",
		"Uguisu",
		"Unicorn",
		"Urchin",
	},
	"V": {
		"Vicuna",
		"Viper",
		"Vole",
		"Vulture",
	},
	"W": {
		"Wallaby",
		"Walrus",
		"Warthog",
		"Wasp",
		"Weasel",
		"Whippet",
		"Wildebeest",
		"Wolf",
		"Wolverine",
		"Wombat",
		"Woodlouse",
		"Woodpecker",
	},
	"X": {
		"Xenops",
		"Xerus",
		"Xenopus",
	},
	"Y": {
		"Yabby",
		"Yak",
		"Yellowhammer",
		"Yellowjacket",
	},
	"Z": {
		"Zebra",
		"Zebu",
		"Zokor",
		"Zonkey",
		"Zorilla",
		"Zorse",
	},
}

func GetIterationName(w http.ResponseWriter, r *http.Request) {
	r.ParseForm()
	letter := r.FormValue("letter")
	iterationName, err := iterationNameGenerator(letter)
	if err != nil {
		fmt.Fprint(w, "Unable to generate iteration name, please try again.\n")
	} else {
		_, _ = fmt.Fprintf(w, "Iteration Name is %s.\n", iterationName)
	}
}

func iterationNameGenerator(letter string) (string, error) {
	if !validLetter(letter) {
		return "", fmt.Errorf("please provide a capital letter")
	}
	adjective := getAdjective(letter)
	animal := getAnimal(letter)
	return adjective + " " + animal, nil
}

func validLetter(letter string) bool {
	if len(letter) != 1 {
		return false
	}
	for _, r := range letter {
		if !unicode.IsLetter(r) || !unicode.IsUpper(r) {
			return false
		}
	}
	return true
}

func getAdjective(letter string) string {
	return selectRandomWord(letter, adjectives)
}

func getAnimal(letter string) string {
	return selectRandomWord(letter, animals)
}

func selectRandomWord(letter string, wordMap map[string][]string) string {
	capital := strings.ToUpper(letter)
	rand.Seed(time.Now().UnixNano())
	word := wordMap[capital][rand.Intn(len(wordMap[capital]))]
	return word
}
